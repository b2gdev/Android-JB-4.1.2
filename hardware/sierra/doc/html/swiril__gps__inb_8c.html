<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Sierra RIL: hardware/sierra/swicommon/swiril_gps_inb.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>hardware/sierra/swicommon/swiril_gps_inb.c File Reference</h1><code>#include &lt;telephony/ril.h&gt;</code><br/>
<code>#include &lt;errno.h&gt;</code><br/>
<code>#include &lt;pthread.h&gt;</code><br/>
<code>#include &lt;termios.h&gt;</code><br/>
<code>#include &lt;fcntl.h&gt;</code><br/>
<code>#include &lt;sys/epoll.h&gt;</code><br/>
<code>#include &lt;math.h&gt;</code><br/>
<code>#include &lt;time.h&gt;</code><br/>
<code>#include &lt;semaphore.h&gt;</code><br/>
<code>#include &lt;signal.h&gt;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="swiril__main_8h_source.html">swiril_main.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="swiril__misc_8h_source.html">swiril_misc.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="swiril__gps_8h_source.html">swiril_gps.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="swims__ossdkuproto_8h_source.html">swims_ossdkuproto.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="swiril__log_8h_source.html">swiril_log.h</a>&quot;</code><br/>
<code>#include &lt;cutils/sockets.h&gt;</code><br/>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="swiril__gps__inb_8c.html#a7ce0df38eb467e59f209470c8f5ac4e6">LOG_TAG</a>&nbsp;&nbsp;&nbsp;&quot;gps_inb&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="swiril__gps__inb_8c.html#a06518335ae8a65694033d23f8dfc60ab">GPS_DEBUG</a>&nbsp;&nbsp;&nbsp;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="swiril__gps__inb_8c.html#a42e1adc61c23126e1f3434485958469f">DFR</a>(...)&nbsp;&nbsp;&nbsp;LOGD(__VA_ARGS__)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="swiril__gps__inb_8c.html#a74021f021dcdfbb22891787b79c5529d">D</a>(...)&nbsp;&nbsp;&nbsp;((void)0)</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="swiril__gps__inb_8c.html#a28b870d2ba4f7dc522438658d099522b">initializeRILType</a> (<a class="el" href="swigps__common_8h.html#a3885b30fb9d10f9adf67f9f65eb450a4">GPS_RILTYPE</a> riltype)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="swiril__gps__inb_8c.html#a3c605c0f75c490ffe4913efca207e254">reqGetNmeaPort</a> (unsigned char *bufp, <a class="el" href="swigps__common_8h.html#a057e84e87d42134d8756aa6987c97e66">swigpsMsgType</a> type, size_t length, void *uparm)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="swiril__gps__inb_8c.html#adb0825b953dfff3e7ed437ca59b2b3e3">packnSend</a> (void(*rilfuncp)(void *), unsigned char *bufp, <a class="el" href="swigps__common_8h.html#a057e84e87d42134d8756aa6987c97e66">swigpsMsgType</a> type, size_t length, void *uparm)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="swiril__gps__inb_8c.html#a4ea29b26bdd68899a215178616760ec2">reqGetDef</a> (unsigned char *bufp, <a class="el" href="swigps__common_8h.html#a057e84e87d42134d8756aa6987c97e66">swigpsMsgType</a> type, size_t length, void *uparm)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="swiril__gps__inb_8c.html#ac3b06228e72618408713190e5011445d">reqSetDef</a> (unsigned char *bufp, <a class="el" href="swigps__common_8h.html#a057e84e87d42134d8756aa6987c97e66">swigpsMsgType</a> type, size_t length, void *uparm)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="swiril__gps__inb_8c.html#a4634d2ae47df05097c2f518852419b39">reqGetAgps</a> (unsigned char *bufp, <a class="el" href="swigps__common_8h.html#a057e84e87d42134d8756aa6987c97e66">swigpsMsgType</a> type, size_t length, void *uparm)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="swiril__gps__inb_8c.html#a502ad579fb83398d6e41e1fa39e4dad9">reqSetAgps</a> (unsigned char *bufp, <a class="el" href="swigps__common_8h.html#a057e84e87d42134d8756aa6987c97e66">swigpsMsgType</a> type, size_t length, void *uparm)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="swiril__gps__inb_8c.html#a5f1584b6465a5ff41b097cd377375d3f">reqInjTime</a> (unsigned char *bufp, <a class="el" href="swigps__common_8h.html#a057e84e87d42134d8756aa6987c97e66">swigpsMsgType</a> type, size_t length, void *uparm)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="swiril__gps__inb_8c.html#ada47b60268a0a087d93e19f7d6e8aeda">reqStop</a> (unsigned char *bufp, <a class="el" href="swigps__common_8h.html#a057e84e87d42134d8756aa6987c97e66">swigpsMsgType</a> type, size_t length, void *uparm)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="swiril__gps__inb_8c.html#a4496984074fab37c7d9a452d0bd1b80b">reqStart</a> (unsigned char *bufp, <a class="el" href="swigps__common_8h.html#a057e84e87d42134d8756aa6987c97e66">swigpsMsgType</a> type, size_t length, void *uparm)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="swiril__gps__inb_8c.html#ad4477b6bef7f0283f3327660a837e5ef">handle_swigps</a> (int fd)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="swigps__common_8h.html#a3885b30fb9d10f9adf67f9f65eb450a4">GPS_RILTYPE</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="swiril__gps__inb_8c.html#ab425b09883006804d99bebc336a7c5ef">s_riltype</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structswigpsTypeHandler.html">swigpsTypeHandler</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="swiril__gps__inb_8c.html#a83a1a17164c011e2648e2af7827c6581">gpsTypeHandler</a> [SWIGPS_MSGTYPE_MAXVAL]</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a74021f021dcdfbb22891787b79c5529d"></a><!-- doxytag: member="swiril_gps_inb.c::D" ref="a74021f021dcdfbb22891787b79c5529d" args="(...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define D</td>
          <td>(</td>
          <td class="paramtype"> <em>...</em>&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((void)0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a42e1adc61c23126e1f3434485958469f"></a><!-- doxytag: member="swiril_gps_inb.c::DFR" ref="a42e1adc61c23126e1f3434485958469f" args="(...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DFR</td>
          <td>(</td>
          <td class="paramtype"> <em>...</em>&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;LOGD(__VA_ARGS__)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a06518335ae8a65694033d23f8dfc60ab"></a><!-- doxytag: member="swiril_gps_inb.c::GPS_DEBUG" ref="a06518335ae8a65694033d23f8dfc60ab" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GPS_DEBUG&nbsp;&nbsp;&nbsp;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a7ce0df38eb467e59f209470c8f5ac4e6"></a><!-- doxytag: member="swiril_gps_inb.c::LOG_TAG" ref="a7ce0df38eb467e59f209470c8f5ac4e6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOG_TAG&nbsp;&nbsp;&nbsp;&quot;gps_inb&quot;</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ad4477b6bef7f0283f3327660a837e5ef"></a><!-- doxytag: member="swiril_gps_inb.c::handle_swigps" ref="ad4477b6bef7f0283f3327660a837e5ef" args="(int fd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handle_swigps </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>fd</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle incoming swigps traffic, arranging to parse it and then dispatching the appropriate handler for it. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fd</em>&nbsp;</td><td>A socket descriptor to use for communication with the peer</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>none</dd></dl>
<dl class="user"><dt><b>Abort: </b></dt><dd>none</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>This function remains in control until the socket closes and then it returns to the caller until another connection is accepted. It also bails out if any other error condition is detected. Check the logs to find out the reason </dd></dl>

</div>
</div>
<a class="anchor" id="a28b870d2ba4f7dc522438658d099522b"></a><!-- doxytag: member="swiril_gps_inb.c::initializeRILType" ref="a28b870d2ba4f7dc522438658d099522b" args="(GPS_RILTYPE riltype)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initializeRILType </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="swigps__common_8h.html#a3885b30fb9d10f9adf67f9f65eb450a4">GPS_RILTYPE</a>&nbsp;</td>
          <td class="paramname"> <em>riltype</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize the RIL type for future comparison against what the GPS vendor specific code expects to be running. </p>
<p>Could be either the AT or the QMI RIL and the GPS vendor specific module's dynamic library must match. The remedy is to ensure the GPS and RIL library are of the same type</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>riltype</em>&nbsp;</td><td>The type of RIL the caller is</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>none</dd></dl>
<dl class="user"><dt><b>Abort: </b></dt><dd>none</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>No validation is performed, it is expected the caller will get it right. An error will be logged if there's a mismatch This function must be called before any others in this file </dd></dl>

</div>
</div>
<a class="anchor" id="adb0825b953dfff3e7ed437ca59b2b3e3"></a><!-- doxytag: member="swiril_gps_inb.c::packnSend" ref="adb0825b953dfff3e7ed437ca59b2b3e3" args="(void(*rilfuncp)(void *), unsigned char *bufp, swigpsMsgType type, size_t length, void *uparm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void packnSend </td>
          <td>(</td>
          <td class="paramtype">void(*)(void *)&nbsp;</td>
          <td class="paramname"> <em>rilfuncp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>bufp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="swigps__common_8h.html#a057e84e87d42134d8756aa6987c97e66">swigpsMsgType</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>uparm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Common routine to process incoming requests for service from <a class="el" href="swigps_8c.html">swigps.c</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>funcp</em>&nbsp;</td><td>Pointer to function to be passed to the RIL daemon via call to <a class="el" href="swiril__main_8c.html#a0f6128d7f18d053a852f6c791860dc2a" title="Enqueue a RILEvent to the request queue.">enqueueRILEvent()</a> </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>bufp</em>&nbsp;</td><td>Pointer to the variable part of the buffer in which the incoming packet was stored. The header has already been parsed prior to this function being called. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>type,:</em>&nbsp;</td><td>The type value that has been parsed out of the incoming buffers' header </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>length</em>&nbsp;</td><td>The length already parsed from the length field in the header. Range-checked by this function as part of validation </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>uparm</em>&nbsp;</td><td>arbitrary void * value. User defined variable - the file descriptor for the socket to send responses back to the sgi side. Passed to the enqueued function for when it needs to send the response back to the swigps daemon</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>none</dd></dl>
<dl class="user"><dt><b>Abort: </b></dt><dd>none</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>none </dd></dl>

</div>
</div>
<a class="anchor" id="a4634d2ae47df05097c2f518852419b39"></a><!-- doxytag: member="swiril_gps_inb.c::reqGetAgps" ref="a4634d2ae47df05097c2f518852419b39" args="(unsigned char *bufp, swigpsMsgType type, size_t length, void *uparm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void reqGetAgps </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>bufp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="swigps__common_8h.html#a057e84e87d42134d8756aa6987c97e66">swigpsMsgType</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>uparm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle incoming request to get the AGPS information from the modem. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>bufp</em>&nbsp;</td><td>Pointer to incoming packet containing the get AGPS request </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>type,:</em>&nbsp;</td><td>The value from the incoming packet's header which triggered a call to this function </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>length</em>&nbsp;</td><td>The length already parsed from the length field in the header. Range-checked by this function as part of validation </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>uparm</em>&nbsp;</td><td>arbitrary void * value. User defined variable - the file descriptor for the socket to send responses back to the sgi side. Passed to the enqueued function for when it needs to send the response back to the swigps daemon</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>none</dd></dl>
<dl class="user"><dt><b>Abort: </b></dt><dd>none</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>none </dd></dl>

</div>
</div>
<a class="anchor" id="a4ea29b26bdd68899a215178616760ec2"></a><!-- doxytag: member="swiril_gps_inb.c::reqGetDef" ref="a4ea29b26bdd68899a215178616760ec2" args="(unsigned char *bufp, swigpsMsgType type, size_t length, void *uparm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void reqGetDef </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>bufp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="swigps__common_8h.html#a057e84e87d42134d8756aa6987c97e66">swigpsMsgType</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>uparm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle incoming request for PDS default settings from swigps. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>bufp</em>&nbsp;</td><td>Pointer to the variable part of the buffer in which the incoming packet was stored. The header has already been parsed prior to this function being called. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>type,:</em>&nbsp;</td><td>The type value that has been parsed out of the incoming buffers' header </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>length</em>&nbsp;</td><td>The length already parsed from the length field in the header. Range-checked by this function as part of validation </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>uparm</em>&nbsp;</td><td>arbitrary void * value. User defined variable - the file descriptor for the socket to send responses back to the sgi side. Passed to the enqueued function for when it needs to send the response back to the swigps daemon</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>none</dd></dl>
<dl class="user"><dt><b>Abort: </b></dt><dd>none</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>none </dd></dl>

</div>
</div>
<a class="anchor" id="a3c605c0f75c490ffe4913efca207e254"></a><!-- doxytag: member="swiril_gps_inb.c::reqGetNmeaPort" ref="a3c605c0f75c490ffe4913efca207e254" args="(unsigned char *bufp, swigpsMsgType type, size_t length, void *uparm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void reqGetNmeaPort </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>bufp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="swigps__common_8h.html#a057e84e87d42134d8756aa6987c97e66">swigpsMsgType</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>uparm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle incoming request to fetch the NMEA tty port name for the swigps package. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>bufp</em>&nbsp;</td><td>Pointer to the variable part of the buffer in which the incoming packet was stored. The header has already been parsed prior to this function being called. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>type,:</em>&nbsp;</td><td>The type value that has been parsed out of the incoming buffers' header </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>length</em>&nbsp;</td><td>The length already parsed from the length field in the header. Range-checked by this function as part of validation </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>uparm</em>&nbsp;</td><td>arbitrary void * value. User defined variable - the file descriptor for the socket to send responses back to the sgi side. Passed to the enqueued function for when it needs to send the response back to the swigps daemon</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>none</dd></dl>
<dl class="user"><dt><b>Abort: </b></dt><dd>none</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>This request handler is unique in this file because it handles the request and sends a response all in one. Other functions in this file dispatch control to the code in <a class="el" href="swiril__gps__qmi_8c.html" title="Provides support for QMI Position Determination Service (PDS) functions.">swiril_gps_qmi.c</a> by enqueing a request to the RIL daemon. </dd></dl>

</div>
</div>
<a class="anchor" id="a5f1584b6465a5ff41b097cd377375d3f"></a><!-- doxytag: member="swiril_gps_inb.c::reqInjTime" ref="a5f1584b6465a5ff41b097cd377375d3f" args="(unsigned char *bufp, swigpsMsgType type, size_t length, void *uparm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void reqInjTime </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>bufp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="swigps__common_8h.html#a057e84e87d42134d8756aa6987c97e66">swigpsMsgType</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>uparm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle incoming time injection requests. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>bufp</em>&nbsp;</td><td>Pointer to storage holding the incoming message from swigps Points to the first byte of the variable length part </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>type,:</em>&nbsp;</td><td>The value contained in the header's type field for the packet that triggered a call to this function </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>length</em>&nbsp;</td><td>The length of the variable length portion of this message </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>uparm</em>&nbsp;</td><td>arbitrary void * value. User defined variable - the file descriptor for the socket to send responses back to the sgi side. Passed to the enqueued function for when it needs to send the response back to the swigps daemn</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>none</dd></dl>
<dl class="user"><dt><b>Abort: </b></dt><dd>none</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>Instead of unpacking the incoming buffer, it and the user parm value are copied into a newly allocated buffer and sent along with the enqueued function for handling inside the RIL daemon </dd></dl>

</div>
</div>
<a class="anchor" id="a502ad579fb83398d6e41e1fa39e4dad9"></a><!-- doxytag: member="swiril_gps_inb.c::reqSetAgps" ref="a502ad579fb83398d6e41e1fa39e4dad9" args="(unsigned char *bufp, swigpsMsgType type, size_t length, void *uparm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void reqSetAgps </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>bufp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="swigps__common_8h.html#a057e84e87d42134d8756aa6987c97e66">swigpsMsgType</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>uparm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle incoming request to change the modem's AGPS server settings. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>bufp</em>&nbsp;</td><td>Pointer to storage holding the incoming message from swigps Points to the first byte of the variable length part </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>type,:</em>&nbsp;</td><td>The value contained in the header's type field for the packet that triggered a call to this function </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>length</em>&nbsp;</td><td>The length of the variable length portion of this message </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>uparm</em>&nbsp;</td><td>arbitrary void * value. User defined variable - the file descriptor for the socket to send responses back to the sgi side. Passed to the enqueued function for when it needs to send the response back to the swigps daemn</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>none</dd></dl>
<dl class="user"><dt><b>Abort: </b></dt><dd>none</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>Instead of unpacking the incoming buffer, it and the user parm value are copied into a newly allocated buffer and sent along with the enqueued function for handling inside the RIL daemon </dd></dl>

</div>
</div>
<a class="anchor" id="ac3b06228e72618408713190e5011445d"></a><!-- doxytag: member="swiril_gps_inb.c::reqSetDef" ref="ac3b06228e72618408713190e5011445d" args="(unsigned char *bufp, swigpsMsgType type, size_t length, void *uparm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void reqSetDef </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>bufp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="swigps__common_8h.html#a057e84e87d42134d8756aa6987c97e66">swigpsMsgType</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>uparm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle incoming request to change the default PDS session settings. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>bufp</em>&nbsp;</td><td>Pointer to the variable part of the buffer in which the incoming packet was stored. The header has already been parsed prior to this function being called. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>type,:</em>&nbsp;</td><td>The type value that has been parsed out of the incoming buffers' header </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>length</em>&nbsp;</td><td>The length already parsed from the length field in the header. Range-checked by this function as part of validation </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>uparm</em>&nbsp;</td><td>arbitrary void * value. User defined variable - the file descriptor for the socket to send responses back to the sgi side. Passed to the enqueued function for when it needs to send the response back to the swigps daemon</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>none</dd></dl>
<dl class="user"><dt><b>Abort: </b></dt><dd>none</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>Instead of unpacking the incoming buffer, it and the user parm value are copied into a newly allocated buffer and sent along with the enqueued function for handling inside the RIL daemon </dd></dl>

</div>
</div>
<a class="anchor" id="a4496984074fab37c7d9a452d0bd1b80b"></a><!-- doxytag: member="swiril_gps_inb.c::reqStart" ref="a4496984074fab37c7d9a452d0bd1b80b" args="(unsigned char *bufp, swigpsMsgType type, size_t length, void *uparm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void reqStart </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>bufp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="swigps__common_8h.html#a057e84e87d42134d8756aa6987c97e66">swigpsMsgType</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>uparm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle requests to start a GPS tracking session. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>bufp</em>&nbsp;</td><td>Pointer to storage holding the incoming message from swigps Points to the first byte of the variable length part </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>type,:</em>&nbsp;</td><td>The value contained in the header's type field for the packet that triggered a call to this function </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>length</em>&nbsp;</td><td>The length of the variable length portion of this message </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>uparm</em>&nbsp;</td><td>arbitrary void * value. User defined variable - the file descriptor for the socket to send responses back to the sgi side. Passed to the enqueued function for when it needs to send the response back to the swigps daemn</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>none</dd></dl>
<dl class="user"><dt><b>Abort: </b></dt><dd>none</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>Instead of unpacking the incoming buffer, it and the user parm value are copied into a newly allocated buffer and sent along with the enqueued function for handling inside the RIL daemon </dd></dl>

</div>
</div>
<a class="anchor" id="ada47b60268a0a087d93e19f7d6e8aeda"></a><!-- doxytag: member="swiril_gps_inb.c::reqStop" ref="ada47b60268a0a087d93e19f7d6e8aeda" args="(unsigned char *bufp, swigpsMsgType type, size_t length, void *uparm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void reqStop </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>bufp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="swigps__common_8h.html#a057e84e87d42134d8756aa6987c97e66">swigpsMsgType</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>uparm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle requests to stop a current GPS tracking session. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>bufp</em>&nbsp;</td><td>Pointer to storage holding the incoming message from swigps Points to the first byte of the variable length part </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>type,:</em>&nbsp;</td><td>The value contained in the header's type field for the packet that triggered a call to this function </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>length</em>&nbsp;</td><td>The length of the variable length portion of this message </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>uparm</em>&nbsp;</td><td>arbitrary void * value. User defined variable - the file descriptor for the socket to send responses back to the sgi side. Passed to the enqueued function for when it needs to send the response back to the swigps daemn</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>none</dd></dl>
<dl class="user"><dt><b>Abort: </b></dt><dd>none</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>Instead of unpacking the incoming buffer, it and the user parm value are copied into a newly allocated buffer and sent along with the enqueued function for handling inside the RIL daemon </dd></dl>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a83a1a17164c011e2648e2af7827c6581"></a><!-- doxytag: member="swiril_gps_inb.c::gpsTypeHandler" ref="a83a1a17164c011e2648e2af7827c6581" args="[SWIGPS_MSGTYPE_MAXVAL]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structswigpsTypeHandler.html">swigpsTypeHandler</a> <a class="el" href="swigps__outb_8c.html#a8526375e360b22beb49cc4edd56fd137">gpsTypeHandler</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
    {<a class="code" href="swiril__gps__inb_8c.html#a3c605c0f75c490ffe4913efca207e254" title="Handle incoming request to fetch the NMEA tty port name for the swigps package.">reqGetNmeaPort</a>, <span class="stringliteral">&quot;reqGetNmeaPort&quot;</span>},      
    {NULL,          <span class="stringliteral">&quot;Empty&quot;</span>},                
    {<a class="code" href="swiril__gps__inb_8c.html#a4ea29b26bdd68899a215178616760ec2" title="Handle incoming request for PDS default settings from swigps.">reqGetDef</a>, <span class="stringliteral">&quot;reqGetDef&quot;</span>},                
    {NULL,          <span class="stringliteral">&quot;Empty&quot;</span>},                
    {<a class="code" href="swiril__gps__inb_8c.html#ac3b06228e72618408713190e5011445d" title="Handle incoming request to change the default PDS session settings.">reqSetDef</a>, <span class="stringliteral">&quot;reqSetDef&quot;</span>},                
    {NULL,          <span class="stringliteral">&quot;Empty&quot;</span>},                
    {<a class="code" href="swiril__gps__inb_8c.html#a4634d2ae47df05097c2f518852419b39" title="Handle incoming request to get the AGPS information from the modem.">reqGetAgps</a>, <span class="stringliteral">&quot;reqGetAgps&quot;</span>},              
    {NULL,          <span class="stringliteral">&quot;Empty&quot;</span>},                
    {<a class="code" href="swiril__gps__inb_8c.html#a502ad579fb83398d6e41e1fa39e4dad9" title="Handle incoming request to change the modem&amp;#39;s AGPS server settings.">reqSetAgps</a>, <span class="stringliteral">&quot;reqSetAgps&quot;</span>},              
    {NULL,          <span class="stringliteral">&quot;Empty&quot;</span>},                
    {<a class="code" href="swiril__gps__inb_8c.html#a5f1584b6465a5ff41b097cd377375d3f" title="Handle incoming time injection requests.">reqInjTime</a>, <span class="stringliteral">&quot;reqInjTime&quot;</span>},              
    {NULL,          <span class="stringliteral">&quot;Empty&quot;</span>},                
    {<a class="code" href="swiril__gps__inb_8c.html#ada47b60268a0a087d93e19f7d6e8aeda" title="Handle requests to stop a current GPS tracking session.">reqStop</a>,    <span class="stringliteral">&quot;reqStop&quot;</span>},                 
    {NULL,          <span class="stringliteral">&quot;Empty&quot;</span>},                
    {<a class="code" href="swiril__gps__inb_8c.html#a4496984074fab37c7d9a452d0bd1b80b" title="Handle requests to start a GPS tracking session.">reqStart</a>,    <span class="stringliteral">&quot;reqStart&quot;</span>},               
    {NULL,          <span class="stringliteral">&quot;Empty&quot;</span>}                 
}
</pre></div>
<p>Array of handler functions. </p>
<p>This array contains slots for all defined packet type values, but only the slots for inbound responses are populated. Outbound slots are placeholders and contain NULL. Indexed by type value</p>
<p>This array contains slots for all defined packet type values, but only the slots for inbound responses are populated. Outbound slots are placeholders and contain NULL. Indexed by type value, so entries in this list must correspond to the message type definitions in <a class="el" href="swigps__common_8h.html" title="Definitions for vendor specific GPS handling which are common to to the RIL side...">swigps_common.h</a> </p>

</div>
</div>
<a class="anchor" id="ab425b09883006804d99bebc336a7c5ef"></a><!-- doxytag: member="swiril_gps_inb.c::s_riltype" ref="ab425b09883006804d99bebc336a7c5ef" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="swigps__common_8h.html#a3885b30fb9d10f9adf67f9f65eb450a4">GPS_RILTYPE</a> <a class="el" href="swiril__gps__inb_8c.html#ab425b09883006804d99bebc336a7c5ef">s_riltype</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Fri Aug 9 18:19:55 2013 for Sierra RIL by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
