<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Sierra RIL: hardware/sierra/swicommon/at_misc.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>hardware/sierra/swicommon/at_misc.c File Reference</h1><code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;errno.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="at__misc_8c.html">at_misc.h</a>&quot;</code><br/>
<code>#include &lt;stdbool.h&gt;</code><br/>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="at__misc_8c.html#a61096e68449593b92fcb4adb711b2813">TLV_STREAM_GET</a>(stream, end, p)</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="at__misc_8c.html#a1ae68362d888c0ed93bb1d4f79bb03ae">strStartsWith</a> (const char *line, const char *prefix)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="at__misc_8c.html#ae786102268d0223feba90ee8c41f6eb0">getFirstElementValue</a> (const char *document, const char *elementBeginTag, const char *elementEndTag, char **remainingDocument)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="at__misc_8c.html#a42eae702721695348e6fa645ac7e8128">char2nib</a> (char c)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="at__misc_8c.html#a1486c83f01d26cc75f670ef08f035bf9">hexToUpper</a> (char *strp, int len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="at__misc_8c.html#a1cc44185c159354e3c412ef03161368c">stringToBinary</a> (const char *string, size_t len, unsigned char *binary)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="at__misc_8c.html#a16d450ed63095bec9cb291741e49313a">binaryToString</a> (const unsigned char *binary, size_t len, char *string)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="at__misc_8c.html#adea37f059c8f3dc8fb8583d1fe88cf19">is3GSim</a> (const char *stream)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="at__misc_8c.html#ab5ee09e3d8caa805ebd37c0f24ea0037">parseTlv</a> (const char *stream, const char *end, struct <a class="el" href="structtlv.html">tlv</a> *<a class="el" href="structtlv.html">tlv</a>)</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a61096e68449593b92fcb4adb711b2813"></a><!-- doxytag: member="at_misc.c::TLV_STREAM_GET" ref="a61096e68449593b92fcb4adb711b2813" args="(stream, end, p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TLV_STREAM_GET</td>
          <td>(</td>
          <td class="paramtype">stream, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">end, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">p&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                \
        <span class="keywordflow">if</span> (stream + 1 &gt;= end)          \
            <span class="keywordflow">goto</span> underflow;             \
        p = ((unsigned)<a class="code" href="at__misc_8c.html#a42eae702721695348e6fa645ac7e8128" title="char2nib - Converts a hexadecimal or decimal value in character form into its equivalent...">char2nib</a>(stream[0]) &lt;&lt; 4)  \
          | ((<span class="keywordtype">unsigned</span>)<a class="code" href="at__misc_8c.html#a42eae702721695348e6fa645ac7e8128" title="char2nib - Converts a hexadecimal or decimal value in character form into its equivalent...">char2nib</a>(stream[1]) &lt;&lt; 0); \
        stream += 2;                    \
    } <span class="keywordflow">while</span> (0)
</pre></div>
</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a16d450ed63095bec9cb291741e49313a"></a><!-- doxytag: member="at_misc.c::binaryToString" ref="a16d450ed63095bec9cb291741e49313a" args="(const unsigned char *binary, size_t len, char *string)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int binaryToString </td>
          <td>(</td>
          <td class="paramtype">const unsigned char *&nbsp;</td>
          <td class="paramname"> <em>binary</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>string</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a42eae702721695348e6fa645ac7e8128"></a><!-- doxytag: member="at_misc.c::char2nib" ref="a42eae702721695348e6fa645ac7e8128" args="(char c)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char char2nib </td>
          <td>(</td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>c</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>char2nib - Converts a hexadecimal or decimal value in character form into its equivalent 4-bit binary value </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>c</em>&nbsp;</td><td>The character to be converted to a 4-bit binary value</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The converted value as a binary digit or 0 if the character was not a decimal or hexadecimal digit</dd></dl>
<dl class="user"><dt><b>Abort: </b></dt><dd>none</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>none </dd></dl>

</div>
</div>
<a class="anchor" id="ae786102268d0223feba90ee8c41f6eb0"></a><!-- doxytag: member="at_misc.c::getFirstElementValue" ref="ae786102268d0223feba90ee8c41f6eb0" args="(const char *document, const char *elementBeginTag, const char *elementEndTag, char **remainingDocument)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* getFirstElementValue </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>document</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>elementBeginTag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>elementEndTag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&nbsp;</td>
          <td class="paramname"> <em>remainingDocument</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>getFirstElementValue: Very simple function that extracts and returns whats between ElementBeginTag and ElementEndTag. </p>
<p>This function is used to extract the parameters from the XML result returned by U3xx during a PDP Context setup, and used to parse the tuples of operators returned from AT+COPS.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>document</em>&nbsp;</td><td>Document to be scanned </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>elementBeginTag</em>&nbsp;</td><td>Begin tag to scan for, return whats between begin/end tags </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>elementEndTag</em>&nbsp;</td><td>End tag to scan for, return whats between begin/end tags </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>remainingDocument</em>&nbsp;</td><td>Can return the a pointer to the remaining of pszDocument, this parameter is optional</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns a pointer to allocated memory (which will need to be freed when done with) containing the elements between the start and end tag, if they are found. returns NULL if any of the specified arguments are NULL or the start or end tags can't be found in the document </dd></dl>

</div>
</div>
<a class="anchor" id="a1486c83f01d26cc75f670ef08f035bf9"></a><!-- doxytag: member="at_misc.c::hexToUpper" ref="a1486c83f01d26cc75f670ef08f035bf9" args="(char *strp, int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hexToUpper </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>strp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>hexToUpper - Accepts a pointer to a string containing printable decimal and hexadecimal digits and converts any lower case hexadecimal entries to upper case. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>in/out]</em>&nbsp;</td><td>strp Pointer to a string of digits to be analyzed and converted </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>len</em>&nbsp;</td><td>The length of the string (bytes), not including the NULL terminator</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>none</dd></dl>
<dl class="user"><dt><b>Abort: </b></dt><dd>none</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>none </dd></dl>

</div>
</div>
<a class="anchor" id="adea37f059c8f3dc8fb8583d1fe88cf19"></a><!-- doxytag: member="at_misc.c::is3GSim" ref="adea37f059c8f3dc8fb8583d1fe88cf19" args="(const char *stream)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool is3GSim </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>stream</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab5ee09e3d8caa805ebd37c0f24ea0037"></a><!-- doxytag: member="at_misc.c::parseTlv" ref="ab5ee09e3d8caa805ebd37c0f24ea0037" args="(const char *stream, const char *end, struct tlv *tlv)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int parseTlv </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtlv.html">tlv</a> *&nbsp;</td>
          <td class="paramname"> <em>tlv</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1cc44185c159354e3c412ef03161368c"></a><!-- doxytag: member="at_misc.c::stringToBinary" ref="a1cc44185c159354e3c412ef03161368c" args="(const char *string, size_t len, unsigned char *binary)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int stringToBinary </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&nbsp;</td>
          <td class="paramname"> <em>binary</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1ae68362d888c0ed93bb1d4f79bb03ae"></a><!-- doxytag: member="at_misc.c::strStartsWith" ref="a1ae68362d888c0ed93bb1d4f79bb03ae" args="(const char *line, const char *prefix)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int strStartsWith </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>prefix</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>strStartsWith. </p>
<p>Returns 1 if line starts with prefix, 0 if it does not.</p>
<p>Determine whether the specified string starts with the specified prefix (a shorter string), informing the caller of the result</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>line</em>&nbsp;</td><td>Pointer to the string to be searched for the specified prefix </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>prefix</em>&nbsp;</td><td>The substring to search for at the start of the string pointed to by "line". Must be NULL terminated</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>1 - The prefix was found 0 - The prefix was not found</dd></dl>
<dl class="user"><dt><b>Abort: </b></dt><dd>none</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>none </dd></dl>

</div>
</div>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Fri Aug 9 18:19:55 2013 for Sierra RIL by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
